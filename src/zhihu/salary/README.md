# Java薪水支付案例

来自知乎专栏 [Java薪水支付案例](https://zhuanlan.zhihu.com/p/28143865)

知识点
1. 类之间的关系：实现、依赖、关联、聚合（has-a）、组合（contains-a）；
2. 设计模式：组合模式、策略模式等；
3. 设计原则：OCP（单一职责）、SRP（开闭原则）等

notes：   
设计模式是一种负担。。。调整了下

薪水支付系统其目的是为了给雇员付薪水。首先考虑给某个雇员付钱，得到核心方法：
Pay(int 雇员ID)

此方法需要解决一个问题，需要给此雇员付多少薪水呢？看来需要一个计算薪水的方法：
CalSalary(int 雇员ID)
新问题产生了，如何计算雇员薪水？原文给出了方法：把雇员分三类，不同类雇员按照不同的结算方式进行结算。此方法产生了雇员属类问题与分类结算问题。

雇员属于哪一类通过查询雇员类型表解决，表可通过IOC注入仓库类来减少耦合。

分类结算问题中每种结算方式的结算周期各异，首先解决结算周期问题。此问题在原文中描述不够明确，但是可以简单理解为上次发薪日到本次结算时的时间间隔大于一个发薪周期，即可结算发薪。上次发薪日通过查询发薪记录表可得，考虑到钱的重要性，可查询付款记录表的付款时间做验证。

然后解决分类结算问题：
小时工通过工时卡结算，工时卡通过查询工时卡表可得，发薪周期为每周，发薪日为周五。特殊规则为工时超过12小时2倍，硬编码即可。固定工通过月薪结算，月薪查月薪表，发薪周期为每月，发薪日为月底。销售员通过提成结算，发薪周期为每2周，发薪日为周五，提成通过计算提成的方法可得，此方法需要查询销售订单，还需要提供一个销售订单表。
雇员应发薪水就可以计算出来了，之后还需要扣款、支付，原文要求比较简单就不展开了。
上述方案中还存在一个问题，应发薪水的返回值为0既不用发薪水，其表现力不够明确，可以在计算薪水之前做发薪检查，判断是否满足发薪需要，然后再计算薪水。最后，整个发薪流程为：发薪检查、计算应付薪水、扣款、支付薪水。

update：  
将Date重构为LocalDate